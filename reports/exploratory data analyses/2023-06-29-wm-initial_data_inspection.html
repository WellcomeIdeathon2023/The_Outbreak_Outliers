<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.427">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Walter Muruet">

<title>Initial Data Inspection</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="2023-06-29-wm-initial_data_inspection_files/libs/clipboard/clipboard.min.js"></script>
<script src="2023-06-29-wm-initial_data_inspection_files/libs/quarto-html/quarto.js"></script>
<script src="2023-06-29-wm-initial_data_inspection_files/libs/quarto-html/popper.min.js"></script>
<script src="2023-06-29-wm-initial_data_inspection_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="2023-06-29-wm-initial_data_inspection_files/libs/quarto-html/anchor.min.js"></script>
<link href="2023-06-29-wm-initial_data_inspection_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="2023-06-29-wm-initial_data_inspection_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="2023-06-29-wm-initial_data_inspection_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="2023-06-29-wm-initial_data_inspection_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="2023-06-29-wm-initial_data_inspection_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="2023-06-29-wm-initial_data_inspection_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="2023-06-29-wm-initial_data_inspection_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-acquisition-process" id="toc-data-acquisition-process" class="nav-link active" data-scroll-target="#data-acquisition-process"><span class="header-section-number">1</span> Data Acquisition Process</a></li>
  <li><a href="#a-first-look-at-the-data" id="toc-a-first-look-at-the-data" class="nav-link" data-scroll-target="#a-first-look-at-the-data"><span class="header-section-number">2</span> A First Look at the Data</a></li>
  <li><a href="#sec-data_prep" id="toc-sec-data_prep" class="nav-link" data-scroll-target="#sec-data_prep"><span class="header-section-number">3</span> Data Preparation</a></li>
  <li><a href="#data-quality" id="toc-data-quality" class="nav-link" data-scroll-target="#data-quality"><span class="header-section-number">4</span> Data Quality</a>
  <ul class="collapse">
  <li><a href="#duplicated-observations" id="toc-duplicated-observations" class="nav-link" data-scroll-target="#duplicated-observations"><span class="header-section-number">4.1</span> Duplicated observations</a></li>
  <li><a href="#missing-data" id="toc-missing-data" class="nav-link" data-scroll-target="#missing-data"><span class="header-section-number">4.2</span> Missing data</a></li>
  </ul></li>
  <li><a href="#tweets-over-time" id="toc-tweets-over-time" class="nav-link" data-scroll-target="#tweets-over-time"><span class="header-section-number">5</span> Tweets Over Time</a></li>
  <li><a href="#qualitative-data" id="toc-qualitative-data" class="nav-link" data-scroll-target="#qualitative-data"><span class="header-section-number">6</span> Qualitative Data</a>
  <ul class="collapse">
  <li><a href="#user-location" id="toc-user-location" class="nav-link" data-scroll-target="#user-location"><span class="header-section-number">6.1</span> User location</a></li>
  <li><a href="#hashtags" id="toc-hashtags" class="nav-link" data-scroll-target="#hashtags"><span class="header-section-number">6.2</span> Hashtags</a></li>
  <li><a href="#user-verified-and-retweet-status" id="toc-user-verified-and-retweet-status" class="nav-link" data-scroll-target="#user-verified-and-retweet-status"><span class="header-section-number">6.3</span> User verified and retweet status</a></li>
  </ul></li>
  <li><a href="#numerical-data" id="toc-numerical-data" class="nav-link" data-scroll-target="#numerical-data"><span class="header-section-number">7</span> Numerical Data</a>
  <ul class="collapse">
  <li><a href="#favourites-followers-and-friends" id="toc-favourites-followers-and-friends" class="nav-link" data-scroll-target="#favourites-followers-and-friends"><span class="header-section-number">7.1</span> Favourites, followers, and friends</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Initial Data Inspection</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Walter Muruet </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="data-acquisition-process" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="data-acquisition-process"><span class="header-section-number">1</span> Data Acquisition Process</h2>
<p>The <code>vax_tweets.csv</code> file was created from data obtained by accessing Tweets between 2020-08-09 to 2022-09-14 with the hashtag #CovidVaccine, according to the data providers (Wellcome Ideathon 2023 team).</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>However, as we will see below, about 15% of the data set’s entries have missing values for hashtags, possibly suggesting an slightly different data acquisition process that the one described.</p>
</div>
</div>
</section>
<section id="a-first-look-at-the-data" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="a-first-look-at-the-data"><span class="header-section-number">2</span> A First Look at the Data</h2>
<p>Using <code>dplyr::glimpse()</code> we can appreciate the data contains 100,000 examples of Tweets each one described by ten features. Four features are of type characters (<code>user_location</code>, <code>user_description</code>, <code>text</code> and <code>hashtags</code>), three are numeric/integers (<code>user_followers</code>, <code>user_friends</code>, <code>user_favourites</code>), two are logical (<code>user_verified</code>, <code>is_retweet</code>) and one is date (<code>date</code>).</p>
<p>Based on this information, we may want to do some data preparation before proceeding with any further data inspection. We will do this in the next section (<a href="#sec-data_prep">Data Preparation</a>)</p>
<div class="cell" data-tbl-cap="Initial glimpse at the data">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="data-glimpse"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="data-glimpse-1"><a href="#data-glimpse-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(tweets_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 100,000
Columns: 10
$ user_location    &lt;chr&gt; "Chicago", "Bengaluru, India", NA, NA, "not in London…
$ user_description &lt;chr&gt; "Official Twitter of Mercy Home for Boys &amp; Girls, a s…
$ user_followers   &lt;int&gt; 4352, 40, 1915, 144, 184, 1539, 446, 2232084, 96, 142…
$ user_friends     &lt;int&gt; 2087, 0, 860, 329, 98, 1209, 406, 373, 498, 121, 513,…
$ user_favourites  &lt;int&gt; 1780, 0, 52127, 15876, 13359, 210, 6271, 110, 7396, 6…
$ user_verified    &lt;lgl&gt; TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, TRUE,…
$ date             &lt;date&gt; 2021-03-12, 2022-03-10, 2021-10-19, 2021-07-02, 2021…
$ text             &lt;chr&gt; "We asked our coworkers why they're getting a COVID-1…
$ hashtags         &lt;chr&gt; "['FeelGoodFriday', 'MercyHomeCares', 'Covid19']", "[…
$ is_retweet       &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALS…</code></pre>
</div>
</div>
</section>
<section id="sec-data_prep" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="sec-data_prep"><span class="header-section-number">3</span> Data Preparation</h2>
<p>Data preparation consists in the following steps:</p>
<ol type="1">
<li>Add a <code>tweet_id</code> column. This will help us keep track of provenance when we start manipulating text fields</li>
<li>Removing leading and trailing square brackets from <code>hastags</code>.</li>
</ol>
<div class="cell tbl-cap-location-bottom">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="ot">&lt;-</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">tweet_id =</span> dplyr<span class="sc">::</span><span class="fu">row_number</span>(),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">hashtags =</span> stringr<span class="sc">::</span><span class="fu">str_remove_all</span>(hashtags, <span class="at">pattern =</span> <span class="st">'^</span><span class="sc">\\</span><span class="st">[|</span><span class="sc">\\</span><span class="st">]$'</span>) </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">relocate</span>(tweet_id)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kreate</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-striped lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Much better! </caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">tweet_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">user_location</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">user_description</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">user_followers</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">user_friends</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">user_favourites</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">user_verified</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">date</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">text</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">hashtags</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">is_retweet</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Chicago</td>
<td style="text-align: left;">Official Twitter of Mercy Home for Boys &amp; Girls, a solution for kids in crisis since 1887.</td>
<td style="text-align: right;">4352</td>
<td style="text-align: right;">2087</td>
<td style="text-align: right;">1780</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">2021-03-12</td>
<td style="text-align: left;">We asked our coworkers why they're getting a COVID-19 vaccine. 😷 #FeelGoodFriday #MercyHomeCares #Covid19… https://t.co/pQluEcDum4</td>
<td style="text-align: left;">'FeelGoodFriday', 'MercyHomeCares', 'Covid19'</td>
<td style="text-align: left;">FALSE</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">Bengaluru, India</td>
<td style="text-align: left;">Hourly updates on FREE and PAID 18+ and 45+ vaccine slot availability across #Bengaluru BBMP,URBAN &amp; RURAL</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">2022-03-10</td>
<td style="text-align: left;">45+ #RURAL #Bengaluru #CovidVaccine Availability for 10/03 at 08:30AM FREE Slots 0 PAID Slots 0</td>
<td style="text-align: left;">'RURAL', 'Bengaluru', 'CovidVaccine'</td>
<td style="text-align: left;">FALSE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">”First they ignore you, then they laugh at you, then they fight you, then you win.” Passions: #Votingrights #BlackLivesMatter #IStandWithPalestine</td>
<td style="text-align: right;">1915</td>
<td style="text-align: right;">860</td>
<td style="text-align: right;">52127</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">2021-10-19</td>
<td style="text-align: left;">@JoyAnnReid @NIH 👿Questions: Could the vaccine have caused #ColinPowell’s death? Could it have caused a relapse in his multiple Myeloma? Could the #covidvaccine be related to Colin Powell’s death in any way? Are those questions even asked?</td>
<td style="text-align: left;">'ColinPowell', 'covidvaccine'</td>
<td style="text-align: left;">FALSE</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="data-quality" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="data-quality"><span class="header-section-number">4</span> Data Quality</h2>
<section id="duplicated-observations" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="duplicated-observations"><span class="header-section-number">4.1</span> Duplicated observations</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    janitor<span class="sc">::</span><span class="fu">get_dupes</span>(<span class="sc">-</span>tweet_id) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">relocate</span>(tweet_id) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kreate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="lightable-paper lightable-striped lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">tweet_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">user_location</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">user_description</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">user_followers</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">user_friends</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">user_favourites</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">user_verified</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">date</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">text</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">hashtags</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">is_retweet</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">dupe_count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">32812</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: right;">43903</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: right;">69622</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>There are no duplicated observations as such. However, <code>tweet_id</code>s 32,812, 43,903 and 69,622 have only missing values. These observations should not have been matched when the tweets were fetched. It is possible that <code>vax_tweets.csv</code> was created by appending csv files together and these were extra rows at the end of each table. . . At any rate, these rows are excluded from all the results below.</p>
</section>
<section id="missing-data" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="missing-data"><span class="header-section-number">4.2</span> Missing data</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>tweet_id) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">missing_matrix_plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-missing" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="2023-06-29-wm-initial_data_inspection_files/figure-html/fig-missing-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Missing values matrix</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-missing">Figure&nbsp;1</a> shows that the columns <code>user_location</code>, <code>user_description</code>, and <code>hashtags</code> have the greatest amount of missing values. <a href="#tbl-missing">Table&nbsp;1</a> below shows the actual quantities of missing values per column.</p>
<div class="cell tbl-cap-location-top">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>tweet_id) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">missing_prop_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kreate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tbl-missing" class="anchored">
<table class="lightable-paper lightable-striped lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Table&nbsp;1: Proportion of missing values per column</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Column</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Missing</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Proportion CI</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">user_location</td>
<td style="text-align: left;">21,271</td>
<td style="text-align: left;">0.21 [0.21, 0.22]</td>
</tr>
<tr class="even">
<td style="text-align: left;">user_description</td>
<td style="text-align: left;">5,504</td>
<td style="text-align: left;">0.06 [0.05, 0.06]</td>
</tr>
<tr class="odd">
<td style="text-align: left;">user_followers</td>
<td style="text-align: left;">9</td>
<td style="text-align: left;">0 [0, 0]</td>
</tr>
<tr class="even">
<td style="text-align: left;">user_friends</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">0 [0, 0]</td>
</tr>
<tr class="odd">
<td style="text-align: left;">user_favourites</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">0 [0, 0]</td>
</tr>
<tr class="even">
<td style="text-align: left;">user_verified</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">0 [0, 0]</td>
</tr>
<tr class="odd">
<td style="text-align: left;">date</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">0 [0, 0]</td>
</tr>
<tr class="even">
<td style="text-align: left;">text</td>
<td style="text-align: left;">9</td>
<td style="text-align: left;">0 [0, 0]</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hashtags</td>
<td style="text-align: left;">15,465</td>
<td style="text-align: left;">0.15 [0.15, 0.16]</td>
</tr>
<tr class="even">
<td style="text-align: left;">is_retweet</td>
<td style="text-align: left;">13</td>
<td style="text-align: left;">0 [0, 0]</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
</section>
</section>
<section id="tweets-over-time" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="tweets-over-time"><span class="header-section-number">5</span> Tweets Over Time</h2>
<p><code>vax_tweets.csv</code> contains tweets from the years 2020,2021 and 2022. The earliest tweet happened on 09 August of 2020 and the last tweet 14 September of 2022. <a href="#fig-tweets-timeline">Figure&nbsp;2</a> below shows the number of tweets aggregated at the week level. The rug is meant to give a sense of the amount of verified users each week.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">transmute</span>(date,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">week =</span> <span class="fu">cut.Date</span>(date, <span class="at">breaks =</span> <span class="st">'1 week'</span>),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">week =</span> <span class="fu">as.Date</span>(week),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">verified =</span> user_verified) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">group_by</span>(week) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">transmute</span>(<span class="at">n =</span> dplyr<span class="sc">::</span><span class="fu">n</span>(),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">verified =</span> <span class="fu">sum</span>(verified, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> week, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_line</span>(<span class="at">linetype =</span> <span class="st">'dashed'</span>, <span class="at">colour =</span> <span class="st">'#377eb8'</span>) <span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">'#377eb8'</span>) <span class="sc">+</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">geom_rug</span>(<span class="at">mapping =</span> ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">y =</span> verified), <span class="at">sides =</span> <span class="st">'b'</span>, <span class="at">colour =</span> <span class="st">'#984ea3'</span>) <span class="sc">+</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">y =</span> <span class="st">'Tweet count'</span>, <span class="at">x =</span> <span class="st">''</span>) <span class="sc">+</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">'%b %y'</span>) <span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    ggthemes<span class="sc">::</span><span class="fu">theme_tufte</span>() <span class="sc">+</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    ggplot2<span class="sc">::</span><span class="fu">theme</span>(<span class="at">text =</span> ggplot2<span class="sc">::</span><span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">'Helvetica'</span>, <span class="at">size =</span> <span class="dv">12</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-tweets-timeline" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="2023-06-29-wm-initial_data_inspection_files/figure-html/fig-tweets-timeline-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Time series of tweets</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="qualitative-data" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="qualitative-data"><span class="header-section-number">6</span> Qualitative Data</h2>
<section id="user-location" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="user-location"><span class="header-section-number">6.1</span> User location</h3>
<p>User location contains a mixture of cities, countries and miscellaneous information (‘not in London’). Furthermore, places may be written in full (‘United States’), as abbreviation (‘UK’), as a combination of state/district and country (‘Bengaluru, India’), city and state (‘Denver, CO’) among other variations. Additionally, city names are not unique (‘London, Ontario, Canada’…damn Europeans, lacking creativity…). These are some issues we need to think about solving if we want to use location data.</p>
<p>Some potential solutions include:</p>
<ol type="1">
<li>Not using user location data. Plain, simple and mediocre. Yay!</li>
<li>Leaving it as-it-is (see <a href="#raw-user-location-data">Raw user location data</a>)</li>
<li>Adapting/expanding on someone else’s work.
<ol type="1">
<li>This could be using code to ‘manually’ harmonise locations</li>
<li>Use a pre-trained transformer</li>
<li>A mixture of these two, where we can fine tune a pre-trained transformer using some of our ‘manually labeled data’.</li>
</ol></li>
</ol>
<p>Some further considerations:</p>
<ol type="1">
<li><p>How much do we care for the cleanliness of location data? For the purpose of the prototype we don’t really need a squeaky clean <code>user_location</code>. Our goal is to produce a proof of concept, and have some clear ideas on how we will refine the process afterwards.</p></li>
<li><p>Furthermore, even if we do a terrific job cleaning <code>user_location</code>, its granularity is unlikely to be great for most of the tweets, so perhaps the cost-benefit of devoting too much time to this is questionable at best.</p></li>
<li><p>Let’s think about what we want to do with <code>user_location</code> and then consider how much does that adds to the project and the final result. . .</p>
<h4 id="raw-user-location-data" data-number="6.1.1" class="anchored"><span class="header-section-number">6.1.1</span> Raw user location data</h4></li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">.drop_na =</span> <span class="fu">list</span>(<span class="cn">FALSE</span>,<span class="cn">TRUE</span>),</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">.y_label =</span> <span class="fu">list</span>(<span class="cn">NULL</span>,<span class="st">''</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">pmap</span>(</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    univar_cat_bar_plot,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">.dataset =</span> tweets_df,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.column =</span> <span class="st">'user_location'</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.n_largest =</span> <span class="dv">30</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(<span class="at">plotlist =</span> ., <span class="at">labels =</span> <span class="st">'AUTO'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-raw_user_location" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="2023-06-29-wm-initial_data_inspection_files/figure-html/fig-raw_user_location-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;3: User location data (Raw)</figcaption>
</figure>
</div>
</div>
</div>
<p>In <a href="#fig-raw_user_location">Figure&nbsp;3</a> subplot A shows frequencies including missing values, while in subplot B these were removed. Notice the difference in the scale between x axes. These represent the raw data as it is, meaning a bit better mileage could be obtained by doing some bare minimum data wrangling, such as turning all letter to lower caps.</p>
<section id="manual-cleaning-of-user-location-data" class="level4" data-number="6.1.2">
<h4 data-number="6.1.2" class="anchored" data-anchor-id="manual-cleaning-of-user-location-data"><span class="header-section-number">6.1.2</span> Manual cleaning of user location data</h4>
<p>Adapting the work user [ANDRADA](https://www.kaggle.com/andradaolteanu) did in Kaggle for cleaning location data of tweets, I have repurpose it into a function to somewhat clean our data. It’s still a work in progress, though. In <span class="citation" data-cites="bl-user_location_manual_01">@bl-user_location_manual_01</span> you can compare a ‘random’ slice of the data set to judge the results by yourselves.</p>
<div class="cell tbl-cap-location-bottom">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="ot">&lt;-</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_user_country</span>(user_location, country)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">13</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(tweet_id, user_location, country) <span class="sc">%&gt;%</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">30</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kreate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tbl-user_location_manual_01" class="anchored">
<table class="lightable-paper lightable-striped lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Table&nbsp;2: Not perfect by any means, but is something. . .</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">tweet_id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">user_location</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">81670</td>
<td style="text-align: left;">Ahoskie, NC</td>
<td style="text-align: left;">ahoskie, nc</td>
</tr>
<tr class="even">
<td style="text-align: right;">71528</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">66255</td>
<td style="text-align: left;">Bengaluru South, India</td>
<td style="text-align: left;">India</td>
</tr>
<tr class="even">
<td style="text-align: right;">68230</td>
<td style="text-align: left;">Los Angeles, California</td>
<td style="text-align: left;">US</td>
</tr>
<tr class="odd">
<td style="text-align: right;">23889</td>
<td style="text-align: left;">Greensboro, NC</td>
<td style="text-align: left;">greensboro, nc</td>
</tr>
<tr class="even">
<td style="text-align: right;">44601</td>
<td style="text-align: left;">San Luis Obispo, CA</td>
<td style="text-align: left;">US</td>
</tr>
<tr class="odd">
<td style="text-align: right;">35846</td>
<td style="text-align: left;">Mississippi</td>
<td style="text-align: left;">mississippi</td>
</tr>
<tr class="even">
<td style="text-align: right;">95779</td>
<td style="text-align: left;">Georgia, USA</td>
<td style="text-align: left;">US</td>
</tr>
<tr class="odd">
<td style="text-align: right;">41520</td>
<td style="text-align: left;">U.S.A.</td>
<td style="text-align: left;">US</td>
</tr>
<tr class="even">
<td style="text-align: right;">26556</td>
<td style="text-align: left;">Washington, DC</td>
<td style="text-align: left;">US</td>
</tr>
<tr class="odd">
<td style="text-align: right;">53005</td>
<td style="text-align: left;">United States</td>
<td style="text-align: left;">US</td>
</tr>
<tr class="even">
<td style="text-align: right;">72571</td>
<td style="text-align: left;">Engadine</td>
<td style="text-align: left;">engadine</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3406</td>
<td style="text-align: left;">North Tyneside</td>
<td style="text-align: left;">north tyneside</td>
</tr>
<tr class="even">
<td style="text-align: right;">5493</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15071</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">39622</td>
<td style="text-align: left;">Chicago, IL &amp; Denver, CO</td>
<td style="text-align: left;">US</td>
</tr>
<tr class="odd">
<td style="text-align: right;">87109</td>
<td style="text-align: left;">UK</td>
<td style="text-align: left;">UK</td>
</tr>
<tr class="even">
<td style="text-align: right;">44608</td>
<td style="text-align: left;">Hyderabad</td>
<td style="text-align: left;">India</td>
</tr>
<tr class="odd">
<td style="text-align: right;">26072</td>
<td style="text-align: left;">Gujarat, Bharat 🇮🇳</td>
<td style="text-align: left;">gujarat, bharat 🇮🇳</td>
</tr>
<tr class="even">
<td style="text-align: right;">65397</td>
<td style="text-align: left;">London, England</td>
<td style="text-align: left;">UK</td>
</tr>
<tr class="odd">
<td style="text-align: right;">95295</td>
<td style="text-align: left;">Connecticut, USA</td>
<td style="text-align: left;">US</td>
</tr>
<tr class="even">
<td style="text-align: right;">22348</td>
<td style="text-align: left;">Uganda</td>
<td style="text-align: left;">uganda</td>
</tr>
<tr class="odd">
<td style="text-align: right;">71905</td>
<td style="text-align: left;">Connecticut, USA</td>
<td style="text-align: left;">US</td>
</tr>
<tr class="even">
<td style="text-align: right;">29711</td>
<td style="text-align: left;">San Diego and Reno</td>
<td style="text-align: left;">US</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5602</td>
<td style="text-align: left;">New York</td>
<td style="text-align: left;">US</td>
</tr>
<tr class="even">
<td style="text-align: right;">28174</td>
<td style="text-align: left;">Worcester, England</td>
<td style="text-align: left;">UK</td>
</tr>
<tr class="odd">
<td style="text-align: right;">19321</td>
<td style="text-align: left;">Southwest</td>
<td style="text-align: left;">southwest</td>
</tr>
<tr class="even">
<td style="text-align: right;">76066</td>
<td style="text-align: left;">India</td>
<td style="text-align: left;">India</td>
</tr>
<tr class="odd">
<td style="text-align: right;">30405</td>
<td style="text-align: left;">Falls Church, VA</td>
<td style="text-align: left;">falls church, va</td>
</tr>
<tr class="even">
<td style="text-align: right;">95056</td>
<td style="text-align: left;">Ojai, CA</td>
<td style="text-align: left;">US</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">univar_cat_bar_plot</span>(tweets_df, country, <span class="at">.drop_na =</span> <span class="cn">TRUE</span>, <span class="at">.n_largest =</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-user_location_manual_01" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="2023-06-29-wm-initial_data_inspection_files/figure-html/fig-user_location_manual_01-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4: User location data after some manual cleaning</figcaption>
</figure>
</div>
</div>
</div>
<p>Compare <a href="#fig-user_location_manual_01">Figure&nbsp;4</a> with <a href="#fig-raw_user_location">Figure&nbsp;3</a>. After some manual cleaning, most tweets appear to be coming from the US, not India. This is not that surprising as the hashtags used to extract the data were in English. However, there is also some bias involve. The list mapping places to the US is several times longer than the one for India.</p>
</section>
<section id="using-a-pre-trained-transformer" class="level4" data-number="6.1.3">
<h4 data-number="6.1.3" class="anchored" data-anchor-id="using-a-pre-trained-transformer"><span class="header-section-number">6.1.3</span> Using a pre-trained transformer</h4>
<p>Coming soon . . .</p>
</section>
</section>
<section id="hashtags" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="hashtags"><span class="header-section-number">6.2</span> Hashtags</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>hashtag_df <span class="ot">&lt;-</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(tweet_id, hashtags)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>hashtag_tkns <span class="ot">&lt;-</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    hashtag_df <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    tidytext<span class="sc">::</span><span class="fu">unnest_tokens</span>(</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">input =</span> hashtags,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">output =</span> hashtag,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">token =</span> <span class="st">'words'</span>,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">format =</span> <span class="st">'text'</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">drop =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">univar_cat_bar_plot</span>(hashtag_tkns, hashtag, <span class="at">.n_largest =</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-hashtag_counts" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="2023-06-29-wm-initial_data_inspection_files/figure-html/fig-hashtag_counts-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;5: Frequency of the 30 most common hashtags</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="user-verified-and-retweet-status" class="level3" data-number="6.3">
<h3 data-number="6.3" class="anchored" data-anchor-id="user-verified-and-retweet-status"><span class="header-section-number">6.3</span> User verified and retweet status</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>tableone<span class="sc">::</span><span class="fu">CreateCatTable</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">vars =</span> <span class="fu">c</span>(<span class="st">'user_verified'</span>, <span class="st">'is_retweet'</span>),</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> tweets_df) <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    tableone<span class="sc">::</span><span class="fu">kableone</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tbl-user_ver_retweet" class="anchored">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Table&nbsp;3: Verified and retweet status</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Overall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">n</td>
<td style="text-align: left;">99997</td>
</tr>
<tr class="even">
<td style="text-align: left;">user_verified = TRUE (%)</td>
<td style="text-align: left;">9800 ( 9.8)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">is_retweet = FALSE (%)</td>
<td style="text-align: left;">99984 (100.0)</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>From <a href="#tbl-user_ver_retweet">Table&nbsp;3</a> we can observe that only about 1 out of every tweets in our data come from an user with verified status. None of the tweets in our data were flagged as retweets.</p>
</section>
</section>
<section id="numerical-data" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="numerical-data"><span class="header-section-number">7</span> Numerical Data</h2>
<section id="favourites-followers-and-friends" class="level3" data-number="7.1">
<h3 data-number="7.1" class="anchored" data-anchor-id="favourites-followers-and-friends"><span class="header-section-number">7.1</span> Favourites, followers, and friends</h3>
<p><a href="#tbl-fffs">Table&nbsp;4</a> below provides descriptive statistics for the number of user favourites, followers, and friends. <a href="#fig-favourites">Figure&nbsp;6</a>, <a href="#fig-followers">Figure&nbsp;7</a> and <a href="#fig-friends">Figure&nbsp;8</a> provide visualisation of their distribution. Notice that all three variables are heavily skewed, as one would expect. All three distribution seem to benefit the most of applying a <strong>log transformation</strong>, a detail that may be important for modeling. However, more sophisticated methods, i.e.&nbsp;BoxCox and YeoJohnson, may provide better results and are worth exploring.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>tweet_id) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">univar_num_table</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kreate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tbl-fffs" class="anchored">
<table class="lightable-paper lightable-striped lightable-hover table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Table&nbsp;4: Number of user followers, friends, and favourites</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Column</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Mean (SD)</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Median [IQR]</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Range</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">user_favourites</td>
<td style="text-align: left;">14,507.92 (± 40,394.79)</td>
<td style="text-align: left;">2,475 [307; 10,782]</td>
<td style="text-align: left;">min: 0; max: 1,381,173</td>
</tr>
<tr class="even">
<td style="text-align: left;">user_followers</td>
<td style="text-align: left;">57,428.09 (± 684,936.8)</td>
<td style="text-align: left;">582 [112; 2,707]</td>
<td style="text-align: left;">min: 0; max: 16,583,788</td>
</tr>
<tr class="odd">
<td style="text-align: left;">user_friends</td>
<td style="text-align: left;">1,642.038 (± 7,774.14)</td>
<td style="text-align: left;">519 [142; 1,423]</td>
<td style="text-align: left;">min: 0; max: 487,064</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">transform_dist_plots</span>(user_favourites)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-favourites" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="2023-06-29-wm-initial_data_inspection_files/figure-html/fig-favourites-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;6: Distribution of user favourites and the effect of common transformations</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">transform_dist_plots</span>(user_followers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-followers" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="2023-06-29-wm-initial_data_inspection_files/figure-html/fig-followers-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;7: Distribution of user followers and the effect of common transformations</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>tweets_df <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">transform_dist_plots</span>(user_friends)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-friends" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="2023-06-29-wm-initial_data_inspection_files/figure-html/fig-friends-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;8: Distribution of user friends and the effect of common transformations</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>